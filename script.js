// –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
const themeToggle = document.getElementById('themeToggle'); // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
const body = document.body; // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç body

themeToggle.addEventListener('click', () => { // –ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –∫–Ω–æ–ø–∫–µ
  body.classList.toggle('light-mode'); // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É
  body.classList.toggle('dark-mode'); // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ç—ë–º–Ω—É—é —Ç–µ–º—É
  themeToggle.textContent = body.classList.contains('light-mode') ? '‚òÄÔ∏è' : 'üåô'; // –ú–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º—ã
});

// –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –ø–æ —è–∫–æ—Ä—è–º
document.querySelectorAll('a[href^="#"]').forEach(anchor => { // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Å—Å—ã–ª–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å #
  anchor.addEventListener('click', function (e) { // –ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ —Å—Å—ã–ª–∫–µ
    e.preventDefault(); // –û—Ç–º–µ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (—Ä–µ–∑–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥)
    document.querySelector(this.getAttribute('href')).scrollIntoView({ // –ü–æ–ª—É—á–∞–µ–º –Ω—É–∂–Ω—ã–π –±–ª–æ–∫
      behavior: 'smooth' // –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –Ω–µ–º—É
    });
  });
});

// –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
const elements = document.querySelectorAll('.—Ä–∞–∑–¥–µ–ª, .–≥–ª–∞–≤–Ω—ã–π-–±–ª–æ–∫'); // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã –∏ –≥–ª–∞–≤–Ω—ã–π –±–ª–æ–∫

window.addEventListener('scroll', () => { // –ü—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  elements.forEach(el => { // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç
    const rect = el.getBoundingClientRect(); // –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —ç–ª–µ–º–µ–Ω—Ç–∞
    if (rect.top < window.innerHeight - 300) { // –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –ø–æ—á—Ç–∏ –≤ –∑–æ–Ω–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏
      el.style.opacity = 1; // –î–µ–ª–∞–µ–º –µ–≥–æ –≤–∏–¥–∏–º—ã–º
      el.style.transform = 'translateY(0)'; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
    }
  });
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Å—Ç–∏–ª–µ–π –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
elements.forEach(el => { // –î–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞—ë–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Å—Ç–∏–ª–∏
  el.style.opacity = 0; // –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å 0 ‚Äî –Ω–µ–≤–∏–¥–∏–º
  el.style.transform = 'translateY(40px)'; // –ù–µ–º–Ω–æ–≥–æ —Å–º–µ—â—ë–Ω –≤–Ω–∏–∑
  el.style.transition = 'all 0.6s ease'; // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
});

// --- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∏–º–µ–Ω–µ–º ---
const g = document.getElementById('greeting'); // –ù–∞—Ö–æ–¥–∏–º –±–ª–æ–∫ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
const btn = document.getElementById('askName'); // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É "–í–≤–µ—Å—Ç–∏ –∏–º—è"

function showGreeting(name) { // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
  g.textContent = name ? `–ü—Ä–∏–≤–µ—Ç, ${name}!` : '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!'; // –ï—Å–ª–∏ –∏–º—è –≤–≤–µ–¥–µ–Ω–æ ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –ø–æ –∏–º–µ–Ω–∏, –∏–Ω–∞—á–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ
}
  
function askName() { // –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∏–º–µ–Ω–∏
  const name = prompt('–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?'); // –°–ø—Ä–∞—à–∏–≤–∞–µ–º –∏–º—è —á–µ—Ä–µ–∑ –æ–∫–Ω–æ –≤–≤–æ–¥–∞
  if (name) { // –ï—Å–ª–∏ –∏–º—è –≤–≤–µ–¥–µ–Ω–æ
    localStorage.setItem('visitorName', name); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
  } else {
    localStorage.removeItem('visitorName'); // –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–≤–µ–¥–µ–Ω–æ ‚Äî —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä–æ–µ –∏–º—è
  }
  showGreeting(localStorage.getItem('visitorName')); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
}

btn.addEventListener('click', askName); // –°–ª—É—à–∞–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–í–≤–µ—Å—Ç–∏ –∏–º—è"
showGreeting(localStorage.getItem('visitorName')); // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ (–µ—Å–ª–∏ –∏–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ)

// –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –±—É—Ä–≥–µ—Ä –∏ –º–µ–Ω—é
// –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç —Å id="hamburger" –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é burger
const burger = document.getElementById('hamburger');

// –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç —Å id="menu" –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é menu
const menu = document.getElementById('menu');

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ –±—É—Ä–≥–µ—Ä
burger.addEventListener('click', () => {
  // –£–∑–Ω–∞—ë–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ aria-expanded (–æ—Ç–∫—Ä—ã—Ç–æ –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç–æ)
  const expanded = burger.getAttribute('aria-expanded') === 'true';
  // –ú–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ
  burger.setAttribute('aria-expanded', String(!expanded));
  // –î–æ–±–∞–≤–ª—è–µ–º –∏–ª–∏ —É–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å open, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç/—Å–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é
  menu.classList.toggle('open');
});

// –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É (—Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)
// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è 'click' –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç menu
menu.addEventListener('click', (e) => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–ª–∏–∫–Ω—É–ª–∏ –∏–º–µ–Ω–Ω–æ –ø–æ —Å—Å—ã–ª–∫–µ (<a>)
  // –∏ —á—Ç–æ —à–∏—Ä–∏–Ω–∞ —ç–∫—Ä–∞–Ω–∞ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ 768px (–º–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)
  if (e.target.tagName === 'A' && window.matchMedia('(max-width: 768px)').matches) {
    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
    menu.classList.remove('open'); // –°–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
    burger.setAttribute('aria-expanded', 'false'); // –û–±–Ω–æ–≤–ª—è–µ–º –∞—Ç—Ä–∏–±—É—Ç
  }
});

// –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–ª–∞–≤–∏—à–∏ Escape
document.addEventListener('keydown', (e) => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞–∂–∞—Ç–∞ –ª–∏ –∫–ª–∞–≤–∏—à–∞ Escape 
// –∏ –æ—Ç–∫—Ä—ã—Ç –ª–∏ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é (aria-expanded === 'true')
if (e.key === 'Escape' && burger.getAttribute('aria-expanded') === 'true') {
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è aria-expanded –≤ 'false'
  burger.setAttribute('aria-expanded', 'false');
  // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å 'open' —É –º–µ–Ω—é, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å –µ–≥–æ
  menu.classList.remove('open');
  }
});


